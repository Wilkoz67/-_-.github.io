<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dla Kingi ğŸ’–</title>

<style>
body{
  margin:0;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:linear-gradient(135deg,#667eea,#764ba2);
  font-family:Arial,sans-serif;
}

.card{
  background:white;
  padding:25px 20px;
  border-radius:20px;
  text-align:center;
  box-shadow:0 10px 30px rgba(0,0,0,0.2);
  width:90%;
  max-width:420px;
}

p{
  font-size:18px;
  margin-bottom:20px;
}

button{
  width:100%;
  padding:14px;
  margin:8px 0;
  font-size:16px;
  border-radius:30px;
  border:none;
  cursor:pointer;
  transition:0.25s;
  background:#f2f2f2;
}

button:hover{
  transform:scale(1.03);
}

.correct{
  background:#4CAF50 !important;
  color:white;
}

.wrong{
  background:#E53935 !important;
  color:white;
}

.next{
  background:#ff4d6d;
  color:white;
  font-weight:bold;
}

canvas{
  position:fixed;
  top:0;
  left:0;
}
</style>
</head>

<body>
<div class="card" id="app"></div>

<script>
const app = document.getElementById("app");

/* ---------- START SCREEN (NIE UCIEKA) ---------- */
function startScreen(){
  app.innerHTML = `
    <p>Gotowa na maÅ‚Ä… grÄ™ o nas? ğŸ’–</p>
    <button id="yes">TAK ğŸ’•</button>
    <button id="no">NIE ğŸ˜„</button>
  `;

  const yes = document.getElementById("yes");
  const no = document.getElementById("no");

  function moveNo(){
    const x = Math.random() * (window.innerWidth - no.offsetWidth);
    const y = Math.random() * (window.innerHeight - no.offsetHeight);
    no.style.position = "fixed";
    no.style.left = x + "px";
    no.style.top = y + "px";
  }

  no.addEventListener("mouseover", moveNo);
  no.addEventListener("touchstart", (e)=>{
    e.preventDefault();
    moveNo();
  });

  yes.onclick = startQuiz;
}

/* ---------- QUIZ ---------- */
const quiz = [
{
q:"KtÃ³rego dnia siÄ™ poznaliÅ›my? ğŸ’­",
options:["27 listopada","28 listopada"],
correct:[0]
},
{
q:"Jaka byÅ‚a Twoja pierwsza fraza w moim Mercedesie? ğŸš—",
options:["Patrz jakie Å‚adne buty","Ja aprawdaju","JedÅº szybciej"],
correct:[1]
},
{
q:"Z jakiej mojej frazy Å›miaÅ‚aÅ› siÄ™ najmocniej w Ozasie ze az upadla na kolana? ğŸ˜‚",
options:[
"Ja zadalbalsia za Wami chodziÄ‡",
"ZapomniaÅ‚em gdzie stoi samochÃ³d",
"U mnie co, uszy brudne?"
],
correct:[2]
},
{
q:"Gdzie najbardziej chcieliÅ›my pojechaÄ‡? âœˆï¸",
options:["BiaÅ‚ystok","MiÅ„sk","KijÃ³w","Warszawa"],
correct:[1]
},
{
q:"Jaka jest Twoja ulubiona fraza do mnie? ğŸ˜„",
options:["Zuszek","Debil","Halop"],
correct:[1]
},
{
q:"Co powiedziaÅ‚aÅ› gdy poznaÅ‚aÅ› mÃ³j znak zodiaku? â™Œ",
options:["Afigienno","Prikolno","NajwaÅ¼niejsze Å¼e nie Lew","Nic"],
correct:[2]
},
{
q:"Jak myÅ›lisz co ja bardziej lubiÄ™? ğŸ•",
options:["Pizza","Kebab"],
correct:[0]
},
{
q:"Jakie paÅ„stwo chciaÅ‚bym najbardziej odwiedziÄ‡ z TobÄ… w 2026? ğŸŒ",
options:["Polska","BiaÅ‚oruÅ›","Italia","Turcja"],
correct:[0,2]
},
{
q:"Jakie jest moje imiÄ™ bierzmowane? â›ª",
options:["Adam","PaweÅ‚","Karol","Antony"],
correct:[1]
},
{
q:"Co najbardziej Mi siÄ™ w tobie  podoba? ğŸ˜ ",
options:["Figura","Twarz","Oczy","Humor"],
correct:[0,1,2,3],
multi:true
},
{
q:"Jaka cecha charakteru podoba mi siÄ™ w Tobie najbardziej? ğŸ’–",
options:["EnergicznoÅ›Ä‡","ÅšmiaÅ‚oÅ›Ä‡","WytrwaÅ‚oÅ›Ä‡","Szacunek"],
correct:[3]
},
{
q:"Spontaniczny wyjazd czy zaplanowany? ğŸŒ",
options:["Spontaniczny","Zaplanowany"],
correct:[],
free:true
}
];

let index = 0;
let selectedMulti = [];

/* ---------- START QUIZ ---------- */
function startQuiz(){
  index = 0;
  renderQuestion();
}

/* ---------- RENDER QUESTION ---------- */
function renderQuestion(){
  selectedMulti = [];
  const q = quiz[index];

  let html = `<p>${q.q}</p>`;
  q.options.forEach((opt,i)=>{
    html += `<button class="option" data-i="${i}">${opt}</button>`;
  });

  app.innerHTML = html;

  document.querySelectorAll(".option").forEach(btn=>{
    btn.onclick = () => handleAnswer(btn);
  });
}

/* ---------- ANSWER LOGIC (FIXED DALEJ) ---------- */
function handleAnswer(btn){
  const q = quiz[index];
  const i = Number(btn.dataset.i);

  // FREE QUESTION (Ğ±ĞµĞ· Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°)
  if(q.free){
    showNextButton();
    return;
  }

  // MULTI SELECT
  if(q.multi){
    if(!selectedMulti.includes(i)){
      selectedMulti.push(i);
      btn.classList.add("correct");
      btn.innerHTML += " ğŸ’–";
    }

    if(selectedMulti.length === q.correct.length){
      showNextButton();
    }
    return;
  }

  // NORMAL QUESTION
  document.querySelectorAll(".option").forEach((b,idx)=>{
    if(q.correct.includes(idx)){
      b.classList.add("correct");
      b.innerHTML += " âœ…";
    } else if(idx === i){
      b.classList.add("wrong");
      b.innerHTML += " âŒ";
    }
    b.disabled = true;
  });

  showNextButton();
}

/* ---------- NEXT BUTTON (100% WORKING) ---------- */
function showNextButton(){
  const nextBtn = document.createElement("button");
  nextBtn.className = "next";
  nextBtn.textContent = "Dalej â¡ï¸";
  nextBtn.onclick = nextQuestion;
  app.appendChild(nextBtn);
}

function nextQuestion(){
  index++;
  if(index < quiz.length){
    renderQuestion();
  } else {
    drawHeart();
  }
}

/* ---------- PERFECT CENTER HEART (NO WHITE LINES) ---------- */
function drawHeart(){
  document.body.innerHTML = "";
  document.body.style.background = "black";
  document.body.style.margin = "0";
  document.body.style.overflow = "hidden";

  const canvas = document.createElement("canvas");
  document.body.appendChild(canvas);
  const ctx = canvas.getContext("2d");

  function resize(){
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  }
  resize();
  window.addEventListener("resize", resize);

  let progress = 0;

  function animate(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.beginPath();

    const scale = Math.min(canvas.width, canvas.height) / 40;

    for(let t = 0; t < progress; t += 0.01){
      let x = 16*Math.pow(Math.sin(t),3);
      let y = -(13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t));
      ctx.lineTo(
        canvas.width/2 + x*scale,
        canvas.height/2 + y*scale
      );
    }

    ctx.strokeStyle = "red";
    ctx.lineWidth = 4;
    ctx.stroke();

    if(progress < Math.PI * 2){
      progress += 0.03;
      requestAnimationFrame(animate);
    } else {
      ctx.font = "bold 36px Arial";
      ctx.fillStyle = "white";
      ctx.textAlign = "center";
      ctx.fillText("Dla Ciebie Kinga ğŸ’–", canvas.width/2, canvas.height/2 + scale*15);
    }
  }

  animate();
}

startScreen();
</script>
</body>
</html>
